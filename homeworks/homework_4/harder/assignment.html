<!--?xml version="1.0" encoding="utf-8" ?-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml-transitional.dtd">
<html><head>
  <title>holoumar@progtest.fit.cvut.cz - ProgTest</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link href="assignment_files/css.css" rel="stylesheet" type="text/css">
  <script src="assignment_files/shared.js" language="JavaScript" type="text/javascript"></script>
  
 </head>
 <body text="#000000" bgcolor="#828273">
  <table width="100%" cellspacing="0" cellpadding="0" border="0">
   <tbody><tr height="25">
    <td bgcolor="#00ff00" align="left"><span class="navLink"><a class="navLink" href="https://progtest.fit.cvut.cz/index.php?X=Main">ProgTest</a>&nbsp;&nbsp;►&nbsp;&nbsp;<a class="navLink" href="https://progtest.fit.cvut.cz/index.php?X=Course&amp;Cou=103">BI-PA2 (13/14 LS)</a>&nbsp;&nbsp;►&nbsp;&nbsp;<a class="navLink" href="https://progtest.fit.cvut.cz/index.php?X=TaskGrp&amp;Cou=103&amp;Tgr=650">Domácí úloha 04</a>&nbsp;&nbsp;►&nbsp;&nbsp;<b>e-Banking</b></span></td>
    <td bgcolor="#00ff00" align="right"><a class="navLink" href="https://progtest.fit.cvut.cz/index.php?X=Logout">Logout</a></td>
   </tr>
  </tbody></table>
<br>




 <br>
 <br>
   <center>
   <div class="topLayout">
    <div class="outBox">
     <table class="header" width="100%" cellspacing="0" cellpadding="0">
      <tbody><tr>
       <td class="header"><b>e-Banking</b></td>
      </tr>
     </tbody></table>
    </div>
   </div>
  </center>
 <form name="form1" method="post" action="?X=TaskU&amp;Cou=103&amp;Tgr=650&amp;Tsk=1061" enctype="multipart/form-data">
  <center>
    <div class="topLayout">
     <div class="outBox">
      <table id="maintable" width="100%" cellspacing="0" cellpadding="2" border="0">
       <colgroup><col width="200">
       <col>
       <col width="130">

       </colgroup><tbody><tr>
        <td class="ltCell" align="left"><b>Termín odevzdání:</b></td>
        <td class="tCell" align="left"><b>20.04.2014 23:59:59</b></td>
        <td class="rtCell" id="countdown" align="right">&nbsp;</td>
       </tr>

       <tr>
        <td class="lCell" align="left"><b>Hodnocení:</b></td>
        <td class="rCell" colspan="2" align="left"><b>8.8000</b></td>
       </tr>
       <tr>
        <td class="lCell" align="left"><b>Max. hodnocení:</b></td>
        <td class="rCell" colspan="2" align="left"><b>8.0000</b> (bez bonusů)</td>
       </tr>
       <tr>
        <td class="lCell" align="left"><b>Odevzdaná řešení:</b></td>
        <td class="rCell" colspan="2" align="left">1 /  20 Volné pokusy + 20 Penalizované pokusy (-2 % penalizace za každé odevzdání)</td>
       </tr>

       <tr>
        <td class="lbCell" align="left"><b>Nápovědy:</b></td>
        <td class="rbCell" colspan="2" align="left">0 / 2 Volné nápovědy + 2 Penalizované nápovědy (-10 % penalizace za každou nápovědu)</td>
       </tr>

       <tr>
        <td class="lrtbCell" colspan="3" align="left"><p>Úkolem je realizovat třídu <tt>CBank</tt>, která bude implementovat
internetové bankovnictví.</p>

<p>Uvažovaná třída je specifická tím, že chceme ukládat všechny změny
(všechny transakce). Dále, pro účely archivace chceme ukládat nezávislé 
kopie instancí.</p>

<p>Úloha je směřována k procvičení pochopení mělké a hluboké kopie objektu.
Má části povinné, dobrovolné a bonusové. Pro splnění povinné části úlohy
postačuje vytvořit funkční třídu, která bude splňovat požadované rozhraní.
Pro zvládnutí nepovinných a bonusových částí je potřeba rozmyslet ukládání
dat tak, aby se při kopírování zbytečně neplýtvalo pamětí.</p>

<p>Úloha má procvičit práci s kopírováním objektů. Z tohoto důvodu jsou v
úloze potlačené části standardní C++ knihovny, zejména STL a datový typ C++
string.</p>

<p>Požadovaná třída <tt>CBank</tt> má následující rozhraní:</p>
<dl>
 <dt><tt>implicitní konstruktor</tt></dt><dd>vytvoří prázdnou instanci
   el. bankovnictví,</dd>
 <dt><tt>kopírující konstruktor</tt></dt><dd>vytvoří hlubokou kopii
   instance. Implementujte jej, pokud kompilátorem automaticky vytvořený 
   kopírující konstruktor nevyhovuje (zkuste si odhadnout - bude
   potřeba?),</dd>
 <dt><tt>destruktor</tt></dt><dd>uvolní prostředky alokované instancí.</dd>
 <dt><tt>operátor =</tt></dt><dd>zkopíruje obsah jedné instance do druhé
   (hluboká kopie). Implementujte jej, pokud kompilátorem automaticky vytvořený 
   operátor = nevyhoví,</dd>
 <dt><tt>NewAccount(accID,initBalance)</tt></dt><dd>metoda přidá
   nové konto:

 <ul>
  <li><tt>accID</tt> udává jednoznačný identifikátor konta. Jedná se o
   řetězec, délka a obsah může být libovolný, je požadována pouze unikátnost,</li>
  <li><tt>initBalance</tt> udává počáteční vklad (celé číslo). Implementovaná banka 
   je velmi vstřícná, za založení konta je ochotna i vyplatit prémii, tedy počáteční 
   vklad může být i záporný.</li>
 </ul>
 Metoda <tt>NewAccount</tt> vrací hodnotu <tt>true</tt> pro signalizaci úspěchu,
 <tt>false</tt> pro neúspěch (konto se stejným <tt>id</tt> již bylo
 zadané).</dd>

 <dt><tt>Transaction(debitAcc,creditAcct,amount,sign)</tt></dt><dd>metoda 
  realizuje bezhotovostní převod z jednoho konta na druhé. Parametry jsou:

 <ul>
  <li><tt>debitAcc</tt> udává identifikátor konta plátce (z něj se částka odečte),</li>
  <li><tt>creditAcc</tt> udává identifikátor konta příjemce (na něj se částka přičte),</li>
  <li><tt>amount</tt> udává převáděnou částku (není záporná, může být nulová nebo kladná),</li>
  <li><tt>sign</tt> udává elektronický podpis autorizace převodu. Jedná se o řetězec, který 
   je potřeba uložit pro účely dokladovaní (aplikace s ním jinak nemusí nijak pracovat).</li>
 </ul>
  Metoda <tt>Transaction</tt> vrací hodnotu <tt>true</tt> pro signalizaci úspěchu,
  <tt>false</tt> pro neúspěch (zadané konto neexistuje). Metoda nekontroluje zůstatek na účtu, 
  předpokládáme, že lze konto bez problémů přečerpat. Převod ale selže, pokud se konto plátce 
  shoduje s kontem příjemce.</dd>
 
 <dt><tt>TrimAccount(accID)</tt></dt><dd>metoda odmaže archivované transakce z daného konta. Tedy aktuální zůstatek
  na kontě se stane počátečním stavem a archivované transakce zmizí. Volání lze chápat tak, že klient
  potvrdil předchozí transakce, tedy nemá cenu je dále archivovat.
  Metoda <tt>TrimAccount</tt> vrací hodnotu <tt>true</tt> pro signalizaci úspěchu,
  <tt>false</tt> pro neúspěch (zadané konto neexistuje).</dd>

 <dt><tt>cout &lt;&lt; Account(accID)</tt></dt><dd>výstup metody <tt>Account</tt> zaslaný
  do streamu zobrazí počáteční stav konta, seznam archivovaných transakcí a konečný stav konta.
  Formát je zřejmý z ukázky. Pokud účet zadaného čísla neexistuje, je vyhozena (libovolná) výjimka.</dd>

 <dt><tt>Account(accID) . Balance()</tt></dt><dd>výstup metody <tt>Account</tt> 
  musí reagovat na volání <tt>Balance</tt>, toto volání vrátí konečný stav zadaného konta. 
  Pokud účet zadaného čísla neexistuje, je vyhozena (libovolná) výjimka.</dd>
</dl>

<hr>

<p>Odevzdávejte soubor, který obsahuje implementovanou třídu
<tt>CBank</tt> a další Vaše podpůrné třídy. Třída musí splňovat veřejné rozhraní 
podle ukázky - pokud Vámi odevzdané řešení nebude obsahovat popsané rozhraní, 
dojde k chybě při kompilaci. Do třídy si ale můžete doplnit další metody (veřejné 
nebo i privátní) a členské proměnné. Odevzdávaný soubor musí obsahovat 
jak deklaraci třídy (popis rozhraní) tak i definice metod, konstruktoru a 
destruktoru. Je jedno, zda jsou metody implementované inline 
nebo odděleně. Odevzdávaný soubor nesmí obsahovat vkládání hlavičkových souborů a 
funkci <tt>main</tt>. Funkce <tt>main</tt> a vkládání hlavičkových souborů může zůstat, 
ale pouze obalené direktivami podmíněného překladu jako v ukázce níže.</p>

<p>Pokud se rozhodnete řešit i nepovinné a bonusové části úlohy, můžete
pro nalezení vhodné reprezentace využít následující pozorování:</p>
<ul>
 <li>Vzniká mnoho kopií instance, které ale dále nejsou měněné. Tedy vyplatí se 
  uvažovat realizaci, kde jsou data sdílená s originálem dokud nedojde k
  první modifikaci originálu nebo kopie.</li>
 <li>Změny v instanci jsou "malé", tedy velká část obsahu zůstane stejná
  jako v originálu. Vyplatí se tedy i uvažovat o sdílení nezměněných částí
  instance. Pokud byste si např. konta realizovali jako třídy, dá se předpokládat,
  že mezi originálem a kopií se změní pouze několik kont.</li>
</ul>

<p>Rozhraní a ukázka použití třídy je dostupná v přiloženém archivu.</p>

</td>
       </tr>


       <tr>
        <td class="ltbCell" colspan="2" align="left"><b>Vzorová data:</b></td>
        <td class="rtbCell" align="center"><div class="but1 w120"><div class="but2"><a class="butLink" href="https://progtest.fit.cvut.cz/index.php?X=TaskS&amp;Cou=103&amp;Tgr=650&amp;Tsk=1061">Download</a></div></div></td>
       </tr>











      </tbody></table>
     </div>
    </div>


 <br>
 <div class="topLayout">
  <div class="outBox">
   <table id="reftable" width="100%" cellspacing="0" cellpadding="2" border="0">
   <tbody><tr>
    <td class="ltbSepCell" align="left"><input name="SHOW_REF" onchange="showRefSolution()" type="checkbox">&nbsp;<b>Referenční řešení</b></td>
    <td class="rtbSepCell" align="right">&nbsp;</td>
   </tr>
   <tr style="display: none;">
    <td class="lrtbCell" colspan="2" align="left"><ul><li><b>Hodnotitel: automat</b><ul><li>Program zkompilován</li><li>Test 'Zakladni test s parametry podle ukazky': Úspěch<ul><li>Dosaženo: 100.00 %, požadováno: 100.00 %</li><li>Celková doba běhu: 0.000 s (limit: 10.000 s)</li><li>Úspěch v závazném testu, hodnocení: 100.00 %</li></ul></li>
<li>Test 'Test nahodnymi daty': Úspěch<ul><li>Dosaženo: 100.00 %, požadováno: 50.00 %</li><li>Celková doba běhu: 0.127 s (limit: 10.000 s)</li><li>Úspěch v závazném testu, hodnocení: 100.00 %</li></ul></li>
<li>Test 'Test kopirujiciho konstruktoru': Úspěch<ul><li>Dosaženo: 100.00 %, požadováno: 50.00 %</li><li>Celková doba běhu: 0.197 s (limit: 9.873 s)</li><li>Úspěch v závazném testu, hodnocení: 100.00 %</li></ul></li>
<li>Test 'Test operatoru =': Úspěch<ul><li>Dosaženo: 100.00 %, požadováno: 50.00 %</li><li>Celková doba běhu: 0.229 s (limit: 9.676 s)</li><li>Úspěch v závazném testu, hodnocení: 100.00 %</li></ul></li>
<li>Test 'Test nahodnymi hodnotami + mem debugger': Úspěch<ul><li>Dosaženo: 100.00 %, požadováno: 50.00 %</li><li>Celková doba běhu: 0.422 s (limit: 10.000 s)</li><li>Úspěch v závazném testu, hodnocení: 100.00 %</li></ul></li>
<li>Test 'Efektivita - kopie beze zmen': Úspěch<ul><li>Dosaženo: 100.00 %, požadováno: 70.00 %</li><li>Celková doba běhu: 0.011 s (limit: 5.000 s)</li><li>Využití paměti: 16832 KiB (limit: 111017 KiB)</li><li>Úspěch v nepovinném testu, hodnocení: 100.00 %</li></ul></li>
<li>Test 'Efektivita - kopie + malo zmen': Úspěch<ul><li>Dosaženo: 100.00 %, požadováno: 100.00 %</li><li>Celková doba běhu: 0.387 s (limit: 5.000 s)</li><li>Využití paměti: 76412 KiB (limit: 111017 KiB)</li><li>Úspěch v bonusovém testu, hodnocení: 125.00 %</li></ul></li>
<li>Celkové hodnocení: 125.00 % (= 1.00 * 1.00 * 1.00 * 1.00 * 1.00 * 1.00 * 1.25)</li></ul></li><li>Celkové procentní hodnocení: 125.00 %</li><li>Odevzdání po termíná - 0.00 b</li></ul></td>
   </tr>
    <tr style="display: none;">
  <td class="ltbCell" align="left"><b>SW metriky:</b></td>
  <td class="rtbCell" colspan="2" align="left">
   <table cellpadding="2" border="0">
    <tbody><tr>
     <td>&nbsp;</td>
     <td class="ac">Celkem</td>
     <td class="ac">Průměr</td>
     <td class="ac">Maximum</td>
     <td>Jméno funkce</td>
    </tr>
    <tr>
     <td>Funkce:</td>
     <td class="ar"><b>53</b></td>
     <td class="ar">--</td>
     <td class="ar">--</td>
     <td>--</td>
    </tr>
    <tr>
     <td>Řádek kódu:</td>
     <td class="ar"><b>330</b></td>
     <td class="ar"><span class="textOk">6.23 ± 7.03</span></td>
     <td class="ar"><span class="textOk">29</span></td>
     <td><tt>NewAccount(const char *,int,CBankImpl *&amp;)</tt></td>
    </tr>
    <tr>
     <td>Cyklomatická složitost:</td>
     <td class="ar"><b>77</b></td>
     <td class="ar"><span class="textOk">1.45 ± 2.19</span></td>
     <td class="ar"><span class="textOk">11</span></td>
     <td><tt>Transaction(const char *,const char *,int,const char *,CBankImpl *&amp;)</tt></td>
    </tr>
   </tbody></table>
  </td>
 </tr>
   </tbody></table>
  </div>
 </div>




 <br>
 <div class="topLayout">
  <div class="outBox">
   <table id="maintable" width="100%" cellspacing="0" cellpadding="2" border="0">
    <colgroup><col width="200">
    <col>
    <col width="130">

   </colgroup><tbody><tr>
    <td class="ltbOkSepCell" align="left"><b>1</b></td>
    <td class="tbOkSepCell" align="left"><b>01.04.2014 23:57:38</b></td>
    <td class="rtbOkSepCell" align="center"><div class="but1 w120"><div class="but2"><a class="butLink" href="https://progtest.fit.cvut.cz/index.php?X=TaskD&amp;Cou=103&amp;Tgr=650&amp;Tsk=1061&amp;Sub=437211">Download</a></div></div></td>
   </tr>
   <tr>
    <td class="ltCell" align="left"><b>Stav odevzdání:</b></td>
    <td class="tCell" align="left">Ohodnoceno</td>



    <td class="rtbCell" rowspan="2">&nbsp;</td>


   </tr>

   <tr>
    <td class="lbCell" align="left"><b>Hodnocení:</b></td>
    <td class="bCell" align="left">8.8000</td>
   </tr>   <tr>
    <td class="lrtbCell" colspan="3" align="left"><ul><li><b>Hodnotitel: automat</b><ul><li>Program zkompilován</li><li>Test 'Zakladni test s parametry podle ukazky': Úspěch<ul><li>Dosaženo: 100.00 %, požadováno: 100.00 %</li><li>Celková doba běhu: 0.000 s (limit: 10.000 s)</li><li>Využití paměti: 12740 KiB (limit: 32892 KiB)</li><li>Úspěch v závazném testu, hodnocení: 100.00 %</li></ul></li>
<li>Test 'Test nahodnymi daty': Úspěch<ul><li>Dosaženo: 100.00 %, požadováno: 50.00 %</li><li>Celková doba běhu: 0.200 s (limit: 10.000 s)</li><li>Využití paměti: 17580 KiB (limit: 32892 KiB)</li><li>Úspěch v závazném testu, hodnocení: 100.00 %</li></ul></li>
<li>Test 'Test kopirujiciho konstruktoru': Úspěch<ul><li>Dosaženo: 100.00 %, požadováno: 50.00 %</li><li>Celková doba běhu: 0.328 s (limit: 9.800 s)</li><li>Využití paměti: 17796 KiB (limit: 32892 KiB)</li><li>Úspěch v závazném testu, hodnocení: 100.00 %</li></ul></li>
<li>Test 'Test operatoru =': Úspěch<ul><li>Dosaženo: 100.00 %, požadováno: 50.00 %</li><li>Celková doba běhu: 0.381 s (limit: 9.472 s)</li><li>Využití paměti: 17796 KiB (limit: 32892 KiB)</li><li>Úspěch v závazném testu, hodnocení: 100.00 %</li></ul></li>
<li>Test 'Test nahodnymi hodnotami + test prace s pameti': Úspěch<ul><li>Dosaženo: 100.00 %, požadováno: 50.00 %</li><li>Celková doba běhu: 3.416 s (limit: 5.000 s)</li><li>Využití paměti: 25840 KiB (limit: 41085 KiB)</li><li>Úspěch v závazném testu, hodnocení: 100.00 %</li></ul></li>
<li>Test 'Efektivita - kopie beze zmen': Úspěch<ul><li>Dosaženo: 100.00 %, požadováno: 70.00 %</li><li>Celková doba běhu: 0.018 s (limit: 5.000 s)</li><li>Využití paměti: 17092 KiB (limit: 111017 KiB)</li><li>Úspěch v nepovinném testu, hodnocení: 100.00 %</li></ul></li>
<li>Test 'Efektivita - kopie + malo zmen': Překročen paměťový limit<ul><li>Celková doba běhu: 3.437 s (limit: 5.000 s)</li><li>Využití paměti: 406244 KiB (limit: 111017 KiB)</li><li>Neúspěch v bonusovém testu, hodnocení: Bonus nebude udělen</li><li>Nesprávný výstup <a href="javascript:%20unlockAdvice('?X=Unlock&amp;Cou=103&amp;Tgr=650&amp;Tsk=1061&amp;Unl=L1007178')">[Zpřístupnit nápovědu (72 B)]</a></li></ul></li>
<li>Všechny paměťové bloky byly uvolněné - ok.</li><li>Celkové hodnocení: 100.00 % (= 1.00 * 1.00 * 1.00 * 1.00 * 1.00 * 1.00)</li></ul></li><li>Použité nápovědy: 2</li><li>Penalizace za vyčerpané nápovědy: Není (2 &lt;= 2 limit)</li><li>Celkové procentní hodnocení: 100.00 %</li><li>Bonus za včasné odevzdání: 0.80</li><li>Celkem bodů: 1.00 * ( 8.00 + 0.80 ) = 8.80</li></ul></td>
   </tr>   </tbody></table>
  </div>
 </div> <br>
  
  
  
  
  
  
  
  
  
  
  
  
 
  </center>
 </form>








<script language="javascript" type="text/javascript">
<!--

var deadLine = new Date ( 1398031199 * 1000 );

function CBpressed ( num )
 {
   var pre, cb;

   cb = MM_findObj ( "cb_" + num );
   pre = MM_findObj ( "pre_" + num );
   if ( cb != null && pre != null )
    {
      pre . style . display = cb . checked ? "block" : "none";
    }
 }

function unlockAdvice ( url )
 {
   if ( confirm ( 'Máte k dispozici pouze omezený počet nápověd. Navíc, použití nápovědy může snížit bodové hodnocení. Opravdu chcete zpřístupnit tuto nápovědu?' ) )
    this . location = url;
 }

function setCountdown ( )
 {
   var d = new Date ();
   var x = ( deadLine . getTime () - d . getTime () );
   var tgt = document . getElementById ( "countdown" );

   if ( x > 0 )
    {
      var s = Math . floor ( x / 1000 );
      var ms = (x % 1000) + "";

      while ( ms . length  < 3 ) ms = "0" + ms;

      tgt . innerHTML = s + "." + ms + " sec";

      window . setTimeout ( setCountdown, 117 );
    }
   else
    {
      tgt . innerHTML = '&nbsp;';
    }
 }

function showRefSolution ( )
 {
   var t = document . getElementById ( "reftable" );
   var x = document . getElementsByName ( "SHOW_REF" )[0];

   if ( ! x ) return;
   var r1 = t . rows[1], r2 = t . rows[2];

   if ( x . checked )
    {
      r1 . style . display = "";
      if ( r2 ) r2 . style . display = "";
    }
   else
    {
      r1 . style . display = "none";
      if ( r2 ) r2 . style . display = "none";
    }
 }


setCountdown ();
showRefSolution ();

// -->
</script>





 


</body></html>
<!-- Template run time: 0.097532033920288 sec -->